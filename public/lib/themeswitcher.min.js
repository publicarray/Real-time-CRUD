(function(e,t,n,r){"use strict";var i=e.fn.bootstrapThemeSwitcher;var s=function(t,n){this.$element=e(t);this.settings=e.extend({},e.fn.bootstrapThemeSwitcher.defaults,n);this.themes=[];this.getThemes();return this};s.prototype={clear:function(){console.log("bootstrapThemeSwitcher.clear");return this.$element.each(function(){this.$element.empty()})},update:function(){console.log("bootstrapThemeSwitcher.update");this.getThemes()},switchTheme:function(t,n){console.log('bootstrapThemeSwitcher.switchTheme: name: "'+t+'", cssFile: "'+n+'"');var i=e(this);var s=e.extend({},e.fn.bootstrapThemeSwitcher.defaults,i.data("bootstrapThemeSwitcher"));var o=s.cssThemeLink;if(n===r){n=this.settings.defaultCssFile}if(t===r){t=n}e('head link[href*="bootstrap.min.css"][id!="'+o+'"]').remove();var u="#"+o;var a=e(u);if(a.length===0){var f="<link rel='stylesheet' id='"+o+"' href='"+n+"' type='text/css' />";e('head link[rel="stylesheet"]:first').before(f);a=e(u)}a.attr("href",n);if(s.saveToCookie){if(e.cookie===r){console.warn("bootstrapThemeSwitcher: saveToCookie is set to true but jQuery.cookie is not present");return}e.cookie(s.cookieThemeName,t,{expires:s.cookieExpiration,path:s.cookiePath});e.cookie(s.cookieThemeCss,n,{expires:s.cookieExpiration,path:s.cookiePath})}},loadThemeFromCookie:function(t){if(e.cookie===r){console.warn("bootstrapThemeSwitcher: loadThemeFromCookie was called but jQuery.cookie is not present");return}var n=e.extend({},e.fn.bootstrapThemeSwitcher.defaults,t);var i=e.cookie(n.cookieThemeName);var s=e.cookie(n.cookieThemeCss);this.switchTheme(i,s)},addThemesToControl:function(){if(this.$element===r){console.error("bootstrapThemeSelector: addThemesToControl: Element is undefined");return}if(this.themes===r){console.error("bootstrapThemeSelector: addThemesToControl: Themes is undefined");return}var t=this;if(this.$element.is("ul")){console.log("bootstrapThemeSelector: UL element selected");this.$element.empty();e.each(this.themes,function(n,r){var i=e("<li />").append("<a href='#'>"+r.name+"</a>").on("click",function(){t.switchTheme(r.name,r.cssCdn)});t.$element.append(i)})}else if(this.$element.is("select")){console.log("bootstrapThemeSelector: SELECT element selected");this.$element.empty();e.each(this.themes,function(e,n){t.$element.append("<option value='"+n.cssCdn+"'>"+n.name+"</option>")});this.$element.on("change",function(){var n=e("option:selected",this);t.switchTheme(n.text(),n.val())})}else{console.warn("bootstrapThemeSelector only works with ul or select elements")}},getThemes:function(){var t=this;e.ajax({url:this.settings.bootswatchApiUrl+"/"+this.settings.bootswatchApiVersion,async:false,dataType:"json",success:function(e){if(e.themes===r){return null}t.themes=e.themes;t.themes.splice(0,0,{name:"default",cssCdn:t.settings.defaultCssFile});t.addThemesToControl()}})}};e.fn.bootstrapThemeSwitcher=function(t){var n=Array.prototype.slice.call(arguments,1);var i;var o=e(this);var u=o.data("bootstrapThemeSwitcher");var a=typeof t==="object"&&t;if(!u){o.data("bootstrapThemeSwitcher",u=new s(this,a))}if(typeof t==="string"){i=u[t].apply(u,n)}return i===r?o:i};e.fn.bootstrapThemeSwitcher.defaults={cssThemeLink:"bootstrapTheme",saveToCookie:true,cookieThemeName:"bootstrapTheme.name",cookieThemeCss:"boostrapTheme.css",cookieExpiration:7,cookiePath:"/",defaultCssFile:"//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css",bootswatchApiUrl:"http://api.bootswatch.com",bootswatchApiVersion:"3"};e.fn.bootstrapThemeSwitcher.Constructor=s;e.fn.bootstrapThemeSwitcher.noConflict=function(){e.fn.BootstrapThemeSwitcher=i;return this}})(jQuery,window,document)
